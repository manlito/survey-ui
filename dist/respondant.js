!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.OverResponse=t():(e.OverResponse=e.OverResponse||{},e.OverResponse.respondant=t())}(self,(function(){return(()=>{var e={676:e=>{!function(){"use strict";var t={class:"className",contenteditable:"contentEditable",for:"htmlFor",readonly:"readOnly",maxlength:"maxLength",tabindex:"tabIndex",colspan:"colSpan",rowspan:"rowSpan",usemap:"useMap"};function n(e,t){try{return e(t)}catch(e){return t}}var i=document,o=window,s=i.documentElement,a=i.createElement.bind(i),r=a("div"),l=a("table"),d=a("tbody"),c=a("tr"),u=Array.isArray,h=Array.prototype,p=h.concat,f=h.filter,v=h.indexOf,m=h.map,g=h.push,I=h.slice,y=h.some,C=h.splice,b=/^#(?:[\w-]|\\.|[^\x00-\xa0])*$/,x=/^\.(?:[\w-]|\\.|[^\x00-\xa0])*$/,R=/<.+>/,O=/^\w+$/;function S(e,t){return e&&(M(t)||H(t))?x.test(e)?t.getElementsByClassName(e.slice(1)):O.test(e)?t.getElementsByTagName(e):t.querySelectorAll(e):[]}var T=function(){function e(e,t){if(e){if(E(e))return e;var n=e;if(P(e)){var s=(E(t)?t[0]:t)||i;if(!(n=b.test(e)?s.getElementById(e.slice(1)):R.test(e)?Ae(e):S(e,s)))return}else if(F(e))return this.ready(e);(n.nodeType||n===o)&&(n=[n]),this.length=n.length;for(var a=0,r=this.length;a<r;a++)this[a]=n[a]}}return e.prototype.init=function(t,n){return new e(t,n)},e}(),w=T.prototype,k=w.init;k.fn=k.prototype=w,w.length=0,w.splice=C,"function"==typeof Symbol&&(w[Symbol.iterator]=h[Symbol.iterator]),w.map=function(e){return k(p.apply([],m.call(this,(function(t,n){return e.call(t,n,t)}))))},w.slice=function(e,t){return k(I.call(this,e,t))};var V=/-([a-z])/g;function A(e){return e.replace(V,(function(e,t){return t.toUpperCase()}))}function L(e,t){var n=e&&(e.matches||e.webkitMatchesSelector||e.msMatchesSelector);return!!n&&!!t&&n.call(e,t)}function E(e){return e instanceof T}function D(e){return!!e&&e===e.window}function M(e){return!!e&&9===e.nodeType}function H(e){return!!e&&1===e.nodeType}function N(e){return"boolean"==typeof e}function F(e){return"function"==typeof e}function P(e){return"string"==typeof e}function B(e){return void 0===e}function z(e){return null===e}function _(e){return!isNaN(parseFloat(e))&&isFinite(e)}function j(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function U(e,t,n){if(n){for(var i=e.length;i--;)if(!1===t.call(e[i],i,e[i]))return e}else if(j(e))for(var o=Object.keys(e),s=(i=0,o.length);i<s;i++){var a=o[i];if(!1===t.call(e[a],a,e[a]))return e}else for(i=0,s=e.length;i<s;i++)if(!1===t.call(e[i],i,e[i]))return e;return e}function q(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=!!N(e[0])&&e.shift(),i=e.shift(),o=e.length;if(!i)return{};if(!o)return q(n,k,i);for(var s=0;s<o;s++){var a=e[s];for(var r in a)n&&(u(a[r])||j(a[r]))?(i[r]&&i[r].constructor===a[r].constructor||(i[r]=new a[r].constructor),q(n,i[r],a[r])):i[r]=a[r]}return i}function G(e){return P(e)?function(t,n){return L(n,e)}:F(e)?e:E(e)?function(t,n){return e.is(n)}:e?function(t,n){return n===e}:function(){return!1}}function Y(e,t){return t?e.filter(t):e}k.guid=1,k.isWindow=D,k.isFunction=F,k.isArray=u,k.isNumeric=_,k.isPlainObject=j,w.get=function(e){return B(e)?I.call(this):this[(e=Number(e))<0?e+this.length:e]},w.eq=function(e){return k(this.get(e))},w.first=function(){return this.eq(0)},w.last=function(){return this.eq(-1)},k.each=U,w.each=function(e){return U(this,e)},w.prop=function(e,n){if(e){if(P(e))return e=t[e]||e,arguments.length<2?this[0]&&this[0][e]:this.each((function(t,i){i[e]=n}));for(var i in e)this.prop(i,e[i]);return this}},w.removeProp=function(e){return this.each((function(n,i){delete i[t[e]||e]}))},k.extend=q,w.extend=function(e){return q(w,e)},w.filter=function(e){var t=G(e);return k(f.call(this,(function(e,n){return t.call(e,n,e)})))};var W=/\S+/g;function J(e){return P(e)&&e.match(W)||[]}function X(e,t,n,i){for(var o=[],s=F(t),a=i&&G(i),r=0,l=e.length;r<l;r++)if(s){var d=t(e[r]);d.length&&g.apply(o,d)}else for(var c=e[r][t];!(null==c||i&&a(-1,c));)o.push(c),c=n?c[t]:null;return o}function $(e){return e.length>1?f.call(e,(function(e,t,n){return v.call(n,e)===t})):e}function Q(e,t,n){if(H(e)){var i=o.getComputedStyle(e,null);return n?i.getPropertyValue(t)||void 0:i[t]||e.style[t]}}function K(e,t){return parseInt(Q(e,t),10)||0}w.hasClass=function(e){return!!e&&y.call(this,(function(t){return H(t)&&t.classList.contains(e)}))},w.removeAttr=function(e){var t=J(e);return this.each((function(e,n){H(n)&&U(t,(function(e,t){n.removeAttribute(t)}))}))},w.attr=function(e,t){if(e){if(P(e)){if(arguments.length<2){if(!this[0]||!H(this[0]))return;var n=this[0].getAttribute(e);return z(n)?void 0:n}return B(t)?this:z(t)?this.removeAttr(e):this.each((function(n,i){H(i)&&i.setAttribute(e,t)}))}for(var i in e)this.attr(i,e[i]);return this}},w.toggleClass=function(e,t){var n=J(e),i=!B(t);return this.each((function(e,o){H(o)&&U(n,(function(e,n){i?t?o.classList.add(n):o.classList.remove(n):o.classList.toggle(n)}))}))},w.addClass=function(e){return this.toggleClass(e,!0)},w.removeClass=function(e){return arguments.length?this.toggleClass(e,!1):this.attr("class","")},k.unique=$,w.add=function(e,t){return k($(this.get().concat(k(e,t).get())))};var Z=/^--/;function ee(e){return Z.test(e)}var te={},ne=r.style,ie=["webkit","moz","ms"];function oe(e,t){if(void 0===t&&(t=ee(e)),t)return e;if(!te[e]){var n=A(e),i=""+n[0].toUpperCase()+n.slice(1);U((n+" "+ie.join(i+" ")+i).split(" "),(function(t,n){if(n in ne)return te[e]=n,!1}))}return te[e]}var se={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function ae(e,t,n){return void 0===n&&(n=ee(e)),n||se[e]||!_(t)?t:t+"px"}w.css=function(e,t){if(P(e)){var n=ee(e);return e=oe(e,n),arguments.length<2?this[0]&&Q(this[0],e,n):e?(t=ae(e,t,n),this.each((function(i,o){H(o)&&(n?o.style.setProperty(e,t):o.style[e]=t)}))):this}for(var i in e)this.css(i,e[i]);return this};var re=/^\s+|\s+$/;function le(e,t){var i=e.dataset[t]||e.dataset[A(t)];return re.test(i)?i:n(JSON.parse,i)}function de(e,t,i){i=n(JSON.stringify,i),e.dataset[A(t)]=i}function ce(e,t){var n=e.documentElement;return Math.max(e.body["scroll"+t],n["scroll"+t],e.body["offset"+t],n["offset"+t],n["client"+t])}function ue(e,t){return K(e,"border"+(t?"Left":"Top")+"Width")+K(e,"padding"+(t?"Left":"Top"))+K(e,"padding"+(t?"Right":"Bottom"))+K(e,"border"+(t?"Right":"Bottom")+"Width")}w.data=function(e,t){if(!e){if(!this[0])return;var n={};for(var i in this[0].dataset)n[i]=le(this[0],i);return n}if(P(e))return arguments.length<2?this[0]&&le(this[0],e):B(t)?this:this.each((function(n,i){de(i,e,t)}));for(var i in e)this.data(i,e[i]);return this},U([!0,!1],(function(e,t){U(["Width","Height"],(function(e,n){w[(t?"outer":"inner")+n]=function(i){if(this[0])return D(this[0])?t?this[0]["inner"+n]:this[0].document.documentElement["client"+n]:M(this[0])?ce(this[0],n):this[0][(t?"offset":"client")+n]+(i&&t?K(this[0],"margin"+(e?"Top":"Left"))+K(this[0],"margin"+(e?"Bottom":"Right")):0)}}))})),U(["Width","Height"],(function(e,t){var n=t.toLowerCase();w[n]=function(i){if(!this[0])return B(i)?void 0:this;if(!arguments.length)return D(this[0])?this[0].document.documentElement["client"+t]:M(this[0])?ce(this[0],t):this[0].getBoundingClientRect()[n]-ue(this[0],!e);var o=parseInt(i,10);return this.each((function(t,i){if(H(i)){var s=Q(i,"boxSizing");i.style[n]=ae(n,o+("border-box"===s?ue(i,!e):0))}}))}}));var he={};function pe(e){return"none"===Q(e,"display")}function fe(e,t){return!t||!y.call(t,(function(t){return e.indexOf(t)<0}))}w.toggle=function(e){return this.each((function(t,n){H(n)&&((B(e)?pe(n):e)?(n.style.display=n.___cd||"",pe(n)&&(n.style.display=function(e){if(he[e])return he[e];var t=a(e);i.body.insertBefore(t,null);var n=Q(t,"display");return i.body.removeChild(t),he[e]="none"!==n?n:"block"}(n.tagName))):(n.___cd=Q(n,"display"),n.style.display="none"))}))},w.hide=function(){return this.toggle(!1)},w.show=function(){return this.toggle(!0)};var ve={focus:"focusin",blur:"focusout"},me={mouseenter:"mouseover",mouseleave:"mouseout"},ge=/^(mouse|pointer|contextmenu|drag|drop|click|dblclick)/i;function Ie(e){return me[e]||ve[e]||e}function ye(e){return e.___ce=e.___ce||{}}function Ce(e){var t=e.split(".");return[t[0],t.slice(1).sort()]}function be(e,t,n,i,o){var s=ye(e);if(t)s[t]&&(s[t]=s[t].filter((function(s){var a=s[0],r=s[1],l=s[2];if(o&&l.guid!==o.guid||!fe(a,n)||i&&i!==r)return!0;e.removeEventListener(t,l)})));else for(t in s)be(e,t,n,i,o)}function xe(e){return e.multiple&&e.options?X(f.call(e.options,(function(e){return e.selected&&!e.disabled&&!e.parentNode.disabled})),"value"):e.value||""}w.off=function(e,t,n){var i=this;if(B(e))this.each((function(e,t){(H(t)||M(t)||D(t))&&be(t)}));else if(P(e))F(t)&&(n=t,t=""),U(J(e),(function(e,o){var s=Ce(o),a=s[0],r=s[1],l=Ie(a);i.each((function(e,i){(H(i)||M(i)||D(i))&&be(i,l,r,t,n)}))}));else for(var o in e)this.off(o,e[o]);return this},w.on=function(e,t,n,i,o){var s=this;if(!P(e)){for(var a in e)this.on(a,t,n,e[a],o);return this}return P(t)||(B(t)||z(t)?t="":B(n)?(n=t,t=""):(i=n,n=t,t="")),F(i)||(i=n,n=void 0),i?(U(J(e),(function(e,a){var r=Ce(a),l=r[0],d=r[1],c=Ie(l),u=l in me,h=l in ve;c&&s.each((function(e,s){if(H(s)||M(s)||D(s)){var a=function e(a){if(a.target["___i"+a.type])return a.stopImmediatePropagation();if((!a.namespace||fe(d,a.namespace.split(".")))&&(t||!(h&&(a.target!==s||a.___ot===c)||u&&a.relatedTarget&&s.contains(a.relatedTarget)))){var r=s;if(t){for(var l=a.target;!L(l,t);){if(l===s)return;if(!(l=l.parentNode))return}r=l,a.___cd=!0}a.___cd&&Object.defineProperty(a,"currentTarget",{configurable:!0,get:function(){return r}}),Object.defineProperty(a,"data",{configurable:!0,get:function(){return n}});var p=i.call(r,a,a.___td);o&&be(s,c,d,t,e),!1===p&&(a.preventDefault(),a.stopPropagation())}};a.guid=i.guid=i.guid||k.guid++,function(e,t,n,i,o){var s=ye(e);s[t]=s[t]||[],s[t].push([n,i,o]),e.addEventListener(t,o)}(s,c,d,t,a)}}))})),this):this},w.one=function(e,t,n,i){return this.on(e,t,n,i,!0)},w.ready=function(e){var t=function(){return setTimeout(e,0,k)};return"loading"!==i.readyState?t():i.addEventListener("DOMContentLoaded",t),this},w.trigger=function(e,t){if(P(e)){var n=Ce(e),o=n[0],s=n[1],a=Ie(o);if(!a)return this;var r=ge.test(a)?"MouseEvents":"HTMLEvents";(e=i.createEvent(r)).initEvent(a,!0,!0),e.namespace=s.join("."),e.___ot=o}e.___td=t;var l=e.___ot in ve;return this.each((function(t,n){l&&F(n[e.___ot])&&(n["___i"+e.type]=!0,n[e.___ot](),n["___i"+e.type]=!1),n.dispatchEvent(e)}))};var Re=/%20/g,Oe=/\r?\n/g,Se=/file|reset|submit|button|image/i,Te=/radio|checkbox/i;w.serialize=function(){var e="";return this.each((function(t,n){U(n.elements||[n],(function(t,n){if(!(n.disabled||!n.name||"FIELDSET"===n.tagName||Se.test(n.type)||Te.test(n.type)&&!n.checked)){var i=xe(n);B(i)||U(u(i)?i:[i],(function(t,i){e+=function(e,t){return"&"+encodeURIComponent(e)+"="+encodeURIComponent(t.replace(Oe,"\r\n")).replace(Re,"+")}(n.name,i)}))}}))})),e.slice(1)},w.val=function(e){return arguments.length?this.each((function(t,n){var i=n.multiple&&n.options;if(i||Te.test(n.type)){var o=u(e)?m.call(e,String):z(e)?[]:[String(e)];i?U(n.options,(function(e,t){t.selected=o.indexOf(t.value)>=0}),!0):n.checked=o.indexOf(n.value)>=0}else n.value=B(e)||z(e)?"":e})):this[0]&&xe(this[0])},w.clone=function(){return this.map((function(e,t){return t.cloneNode(!0)}))},w.detach=function(e){return Y(this,e).each((function(e,t){t.parentNode&&t.parentNode.removeChild(t)})),this};var we=/^\s*<(\w+)[^>]*>/,ke=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,Ve={"*":r,tr:d,td:c,th:c,thead:l,tbody:l,tfoot:l};function Ae(e){if(!P(e))return[];if(ke.test(e))return[a(RegExp.$1)];var t=we.test(e)&&RegExp.$1,n=Ve[t]||Ve["*"];return n.innerHTML=e,k(n.childNodes).detach().get()}k.parseHTML=Ae,w.empty=function(){return this.each((function(e,t){for(;t.firstChild;)t.removeChild(t.firstChild)}))},w.html=function(e){return arguments.length?B(e)?this:this.each((function(t,n){H(n)&&(n.innerHTML=e)})):this[0]&&this[0].innerHTML},w.remove=function(e){return Y(this,e).detach().off(),this},w.text=function(e){return B(e)?this[0]?this[0].textContent:"":this.each((function(t,n){H(n)&&(n.textContent=e)}))},w.unwrap=function(){return this.parent().each((function(e,t){if("BODY"!==t.tagName){var n=k(t);n.replaceWith(n.children())}})),this},w.offset=function(){var e=this[0];if(e){var t=e.getBoundingClientRect();return{top:t.top+o.pageYOffset,left:t.left+o.pageXOffset}}},w.offsetParent=function(){return this.map((function(e,t){for(var n=t.offsetParent;n&&"static"===Q(n,"position");)n=n.offsetParent;return n||s}))},w.position=function(){var e=this[0];if(e){var t="fixed"===Q(e,"position"),n=t?e.getBoundingClientRect():this.offset();if(!t){for(var i=e.ownerDocument,o=e.offsetParent||i.documentElement;(o===i.body||o===i.documentElement)&&"static"===Q(o,"position");)o=o.parentNode;if(o!==e&&H(o)){var s=k(o).offset();n.top-=s.top+K(o,"borderTopWidth"),n.left-=s.left+K(o,"borderLeftWidth")}}return{top:n.top-K(e,"marginTop"),left:n.left-K(e,"marginLeft")}}},w.children=function(e){return Y(k($(X(this,(function(e){return e.children})))),e)},w.contents=function(){return k($(X(this,(function(e){return"IFRAME"===e.tagName?[e.contentDocument]:"TEMPLATE"===e.tagName?e.content.childNodes:e.childNodes}))))},w.find=function(e){return k($(X(this,(function(t){return S(e,t)}))))};var Le=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ee=/^$|^module$|\/(java|ecma)script/i,De=["type","src","nonce","noModule"];function Me(e,t,n,i,o,r,l,d){return U(e,(function(e,r){U(k(r),(function(e,r){U(k(t),(function(t,l){var d=n?l:r,c=n?e:t;!function(e,t,n,i,o){i?e.insertBefore(t,n?e.firstChild:null):e.parentNode.insertBefore(t,n?e:e.nextSibling),o&&function(e,t){var n=k(e);n.filter("script").add(n.find("script")).each((function(e,n){if(Ee.test(n.type)&&s.contains(n)){var i=a("script");i.text=n.textContent.replace(Le,""),U(De,(function(e,t){n[t]&&(i[t]=n[t])})),t.head.insertBefore(i,null),t.head.removeChild(i)}}))}(t,e.ownerDocument)}(n?r:l,c?d.cloneNode(!0):d,i,o,!c)}),d)}),l)}),r),t}w.after=function(){return Me(arguments,this,!1,!1,!1,!0,!0)},w.append=function(){return Me(arguments,this,!1,!1,!0)},w.appendTo=function(e){return Me(arguments,this,!0,!1,!0)},w.before=function(){return Me(arguments,this,!1,!0)},w.insertAfter=function(e){return Me(arguments,this,!0,!1,!1,!1,!1,!0)},w.insertBefore=function(e){return Me(arguments,this,!0,!0)},w.prepend=function(){return Me(arguments,this,!1,!0,!0,!0,!0)},w.prependTo=function(e){return Me(arguments,this,!0,!0,!0,!1,!1,!0)},w.replaceWith=function(e){return this.before(e).remove()},w.replaceAll=function(e){return k(e).replaceWith(this),this},w.wrapAll=function(e){for(var t=k(e),n=t[0];n.children.length;)n=n.firstElementChild;return this.first().before(t),this.appendTo(n)},w.wrap=function(e){return this.each((function(t,n){var i=k(e)[0];k(n).wrapAll(t?i.cloneNode(!0):i)}))},w.wrapInner=function(e){return this.each((function(t,n){var i=k(n),o=i.contents();o.length?o.wrapAll(e):i.append(e)}))},w.has=function(e){var t=P(e)?function(t,n){return S(e,n).length}:function(t,n){return n.contains(e)};return this.filter(t)},w.is=function(e){var t=G(e);return y.call(this,(function(e,n){return t.call(e,n,e)}))},w.next=function(e,t,n){return Y(k($(X(this,"nextElementSibling",t,n))),e)},w.nextAll=function(e){return this.next(e,!0)},w.nextUntil=function(e,t){return this.next(t,!0,e)},w.not=function(e){var t=G(e);return this.filter((function(n,i){return(!P(e)||H(i))&&!t.call(i,n,i)}))},w.parent=function(e){return Y(k($(X(this,"parentNode"))),e)},w.index=function(e){var t=e?k(e)[0]:this[0],n=e?this:k(t).parent().children();return v.call(n,t)},w.closest=function(e){var t=this.filter(e);if(t.length)return t;var n=this.parent();return n.length?n.closest(e):t},w.parents=function(e,t){return Y(k($(X(this,"parentElement",!0,t))),e)},w.parentsUntil=function(e,t){return this.parents(t,e)},w.prev=function(e,t,n){return Y(k($(X(this,"previousElementSibling",t,n))),e)},w.prevAll=function(e){return this.prev(e,!0)},w.prevUntil=function(e,t){return this.prev(t,!0,e)},w.siblings=function(e){return Y(k($(X(this,(function(e){return k(e).parent().children().not(e)})))),e)},e.exports=k}()}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{"use strict";n.r(i),n.d(i,{getResponses:()=>b,launchSurvey:()=>y,resetResponses:()=>x});var e=n(676),t=n.n(e);function o(e){var t=e;this.randomizeArray=function(e){var t,n,i,o=e.length;if(0===o)return!1;for(;--o;)t=Math.floor(Math.random()*(o+1)),n=e[o],i=e[t],e[o]=i,e[t]=n},this.randomId=function(){return this.S4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},this.guid=function(){return this.S4()+""+this.S4()+this.S4()+this.S4()},this.guid()},this.tr=function(e){for(var t=Array.prototype.slice.call(arguments,0),n=t.slice(1),i=0;i<n.length;++i)e=e.replace(/\%s/i,n[i]);return e},this.c=function(e){"undefined"!=typeof console&&void 0!==console.log&&console.log(e)},this.console=function(e){this.show=function(e){t.cookie("ORShowDebug",e,{expires:30,path:"/"})},"string"==typeof e&&(e={text:e});var n,i,o,s=t.extend({hidden:"true"!==t.cookie("ORShowDebug"),type:"Notice"},e);if(0==t("#Console").length){n=t('<div id="Console"><div class="clearfix"><div class="btn-group pull-right"></div></div></div>').appendTo("body"),t('<button type="button" class="btn btn-default">Clean</button>').appendTo(n.find(".btn-group")).on({click:function(e){i.empty()}}),(o=t('<button type="button" class="btn btn-default">Close</button>').appendTo(n.find(".btn-group"))).on({click:function(e){n.fadeOut("fast")}}),t('<button type="button" class="btn btn-danger">Disable</button>').prependTo(n.find(".btn-group")).on({click:function(e){t.cookie("ORShowDebug",!1),o.trigger("click")}});var a=t('<div class="ConsoleArea"></div>').appendTo(n);i=t('<div class="TextArea"></div>').appendTo(a);var r=t('<div class="btn-group"></div>').appendTo(n);t('<button type="button" class="btn btn-default">Send Report</button>').appendTo(r)}else n=t("#Console");s.hidden?n.hide():n.fadeIn("fast"),n.find(".TextArea").prepend("<div>"+s.text+"</div>")},this.objectSize=function(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n},this.stopPropagation=function(e){e.stopPropagation()},this.documentClick=function(e){t(document).trigger("click")},this.areArraysEqual=function(e,n){return 0==t(e).not(n).length&&0==t(n).not(e).length}}const s="Unlimited",a="Click to edit",r="Yes",l="No",d="Female",c="Male",u="True",h="False",p="Attribute / Subject",f="Don't Care",v="Neutral",m="Very Important";function g(e,t){var n=e,i=this;n(window).on({"click.ORBaseUI":function(e){0==n(e.target).closest(".uiDropDown, .ORLayoutLeft, .ORLayoutRight").length&&n(".uiGeneric").trigger("ORHide")}}),this.base=function(e){var i=n.extend({id:t.randomId(),toolbarId:"NotAvailable",container:void 0,label:"",suffix:"",description:"Description of the command",command:"javascript:void(0)",enabled:!0,positionX:void 0,positionY:void 0,labelWidth:0,width:0,height:0,layout:"Bottom",class:void 0,events:{valueSet:function(){}}},e);this.events=i.events,this.id=i.id;var o,s="";s+='<div class="UiItem" id="'+i.id+'">',""!=i.label&&(s+='<div class="Label">'+i.label+"</div>"),s+='<div class="ORInput"></div>',""!=i.suffix&&(s+='<div class="Suffix">'+i.suffix+"</div>"),s+='<div style="clear: both;"></div>',s+="</div>",o=null!=i.container?n(s).appendTo(i.container):n(s).appendTo("#"+i.toolbarId+" .Fields"),null!=i.class&&o.addClass(i.class),0!=i.labelWidth&&o.find(".Label").width(i.labelWidth+"em"),null==i.positionX&&null==i.positionY||o.css("position","absolute"),null!=i.positionX&&o.css("left",i.positionX),null!=i.positionY&&o.css("top",i.positionY),this.item=o,this.getItemId=function(){return this.id},this.getValue=function(){return 0},this.setValue=function(){},this.reset=function(){t.console({text:"Base - Reset Not implemented"})},this.activate=function(){},this.deactivate=function(){},void 0!==i.value&&this.setValue(i.value,{skipEvents:!0})},this.tooltip=function(e){e=n.extend({container:n("body"),position:"right",text:"OverResponse Help Tooltip",monitorInput:!1,offset:3,delay:500},e),this.showTip=function(i){var o={of:e.container};if("mouse"!=e.position){switch(e.position){case"top":o.my="center bottom",o.at="center top",o.offset="0 -"+e.offset;break;case"mouse":o.my="center bottom",o.at="center top",o.offset="0 -"+e.offset;default:o.my="left center",o.at="right center"}e.container.is("input")?t.tip.stop(!0,!0).show().position(o).hide().fadeIn("normal"):e.container.queue((function(i){t.tip.stop(!0,!0).delay(e.delay).queue((function(e){n(this).show().position(o).hide(),e()})).fadeIn("normal"),i()}))}else t.tip.stop(!0,!0).css({top:mousePosition.y,left:mousePosition.x}).fadeIn("normal")},this.hideTip=function(n){(!e.monitorInput||e.monitorInput&&!e.container.find("input").is(":focus"))&&t.tip.stop(!0,!0).fadeOut("fast")};var t=this;this.tip=n('<div class="ToolTip"></div>').appendTo("body"),this.tipContent=n('<div class="TipContent">'+e.text+"</div>").appendTo(this.tip),e.container.is("input")?e.container.on({focus:t.showTip,blur:t.hideTip}):(t.tip.addClass("NoInput"),e.container.on({mouseenter:t.showTip,mouseleave:t.hideTip}),e.monitorInput&&(e.container.find("input").on({focus:t.showTip,blur:t.hideTip}),n("body").on("click",t.hideTip)),e.container.on("click",t.hideTip))},this.button=function(e){n.extend(this,new i.base(e));var t=n.extend({id:"NotAvailable",toolbarId:"NotAvailable",title:"",text:"",description:"Description of the command",command:function(){},href:"",enabled:!0,horizontal:!0,positionX:"5px",positionY:"10px",width:0,height:0,enableIcon:!0,texturePositionX:0,texturePositionY:0},e),o=void 0,s=this.item.find(".ORInput"),a={click:t.command};this.setEnabled=function(e){o.find(".Icon").css("background-position",t.texturePositionX-(e?0:50)+"px "+t.texturePositionY+"px"),e?(o.parent().on(a),o.addClass("Enabled")):(o.parent().off(a),o.removeClass("Enabled"))},""==t.title&&(t.title=t.text);var r="";r+='<div class="" style="width: 100%; height: 100%;">',r+='<a class="Button '+(t.enabled?"Enabled ":"")+(1==t.horizontal?"Horizontal":"Vertical")+'" '+(""!=t.href?'href="'+t.href+'"':"")+">",t.enableIcon&&(r+='<div class="Icon ORFontIcon Iconset"></div>'),""!=t.text&&(r+='<div class="Label">'+t.text+"</div>"),o=n(r+="</a></div>").appendTo(s.addClass("ButtonItem")),0!==t.width&&s.css("width",t.width),0!==t.height&&s.css("height",t.height),o.find(".Icon").css("background-position",t.texturePositionX-(t.enabled?0:50)+"px "+t.texturePositionY+"px"),t.enabled&&o.parent().on(a),o.find(".Button").css("width","100%"),0==t.horizontal&&o.find(".Button").css("height","100%")},this.dropDown=function(e){var o=this;n.extend(this,new i.base(e)),e=n.extend({defaultLabel:a},e),this.value="",this.collapsed=!0,this.createOption=function(e){var t=n.extend({label:a,value:"",selected:!1},e),i='<li class="Option">  <div class="OptionContent Rounded8px">    <div class="Legend">'+t.label+"</div>  </div></li>";return n(i).appendTo(this.optionsContainer.children("ul")).on({click:o.optionClickEvent}).data({label:t.label,value:t.value})},this.reset=function(){o.value=void 0,o.currentContainer.children(".text").html(e.defaultLabel)},this.optionClickEvent=function(e){o.setValue(n(this).data("label")),o.collapse(),o.events.valueSet({value:o.value,caller:o.currentContainer,relatedItemId:o.getItemId()})},this.setValue=function(e){o.value=e,o.currentContainer.children(".text").html(e)},this.getValue=function(){return o.value},this.activate=function(){o.expand()},this.deactivate=function(){o.collapse()},this.expand=function(){o.optionsContainer.css({top:l.height(),transform:"scaleY(1)"}),o.currentContainer.addClass("selected"),o.collapsed=!1},this.collapse=function(){o.currentContainer.removeClass("selected"),o.optionsContainer.css({transform:"scaleY(0)"}),o.collapsed=!0},this.toggleCollapse=function(){o.collapsed?o.expand():o.collapse()};var s=n.extend({type:"Notification",options:[{label:"Sample Option A",value:0},{label:"Sample Option B",value:1},{label:"Sample Option C",value:2}],selectedOption:0,onSelect:void 0,randomize:!1,editOptions:{enableSorting:!0}},e),r=this.item.children(".ORInput"),l=n('<div class="uiDropDown uiMultiOption uiGeneric"></div>').appendTo(r);this.currentContainer=l,n('<div class="text">'+e.defaultLabel+"</div>").appendTo(l),n('<div class="arrow"></div>').appendTo(l),this.optionsContainer=n('<div class="Options"><ul></ul></div>').appendTo(l),this.optionsContainer.on({click:function(e){e.stopPropagation()},mousedown:function(e){e.stopPropagation()}}),this.currentContainer.on("click",(function(t){o.toggleCollapse(),void 0!==e.events.activate&&e.events.activate(o.currentContainer),void 0!==e.containerClickCommand&&e.containerClickCommand()})).on("ORHide",(function(e){o.collapse()})),s.randomize&&t.randomizeArray(s.options),n.each(s.options,(function(e,t){o.createOption({label:t.label,value:t.value})})),l.on({mouseenter:function(){n(this).addClass("hover")},mouseleave:function(){n(this).removeClass("hover")}})},this.listChoice=function(e){var o=this;e=n.extend({type:"RadioText",randomize:!1,multiSelect:!1,other:{show:!1}},e),this.type=e.type,this.parentType="Radio",this.multiSelect=e.multiSelect,e.type.match(/List/i)?this.parentType="List":e.type.match(/Binary/i)&&(this.parentType="Binary"),n.extend(this,new i.base(e)),this.value="",this.createOption=function(e){var t=n.extend({label:a,value:"",extra:"",selected:!1,other:{show:!1}},e),s='<div class="Legend">'+t.label+"</div>";"RadioImage"==o.type||"ListImage"==o.type?s='<div class="Image"><img src="'+t.extra+'"></div>'+s:"RadioVideo"!=o.type&&"ListVideo"!=o.type||(s='<div class="Video">'+("YouTube"===t.extra[0]?'<iframe width="320" height="180" src="http://www.youtube.com/embed/'+t.extra[1]+'?rel=0" frameborder="0" allowfullscreen></iframe>':'<iframe src="http://player.vimeo.com/video/'+t.extra[1]+'" width="320" height="180" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>')+"</div>"+s);var r='<li class="Option '+(t.other.show?" Other":"")+'">  <div class="OptionContent Rounded8px">    <div class="CellCheck"><div class="CheckMark ORFontIcon"></div></div>    <div class="CellLabel">'+s+"</div>"+(t.other.show?'    <div class="OtherInput"></div>':"")+"  </div></li>",l=this.optionsContainer.children("ul").children("li").last(),d=n(l).hasClass("OtherOption")?l.prev():l,c=(l.length>0?n(r).insertAfter(d):n(r).appendTo(this.optionsContainer.children("ul"))).on({click:o.optionClickEvent}).data({label:t.label,value:t.value,extra:t.extra});return t.other.show&&new i.input({container:c.find(".OtherInput"),label:t.other.hint}),c},this.optionClickEvent=function(i){i.stopPropagation(),e.multiSelect?n(this).toggleClass("Selected"):(o.setValue(n(this).data("label")),o.optionsContainer.children("ul").children("li").not(this).removeClass("Selected"),n(this).addClass("Selected"));var s=o.getValue();void 0!==o.events.activate&&o.events.activate(o.currentContainer),t.console("currentItem.type "+o.type),o.events.valueSet({value:s,caller:o.currentContainer,relatedItemId:o.getItemId(),remainInItem:/^List/.test(o.type)&&"ListCheck"!=o.type})},this.getValue=function(){if(e.multiSelect&&"ListCheck"==o.type)return o.optionsContainer.children("ul").children().first().hasClass("Selected")?"On":"";var t=o.optionsContainer.children("ul").children("li.Selected").get().map((function(e,t){return n(e).find(".Legend").first().text()}));return o.multiSelect?t:0==t.length?"":t[0]},this.reset=function(){o.optionsContainer.children("ul").children("li").each((function(){n(this).removeClass("Selected")}))},this.setValue=function(e){o.value=e,o.currentContainer.children(".text").html(e)},this.setOther=function(t){t&&"Radio"==o.parentType&&o.createOption({label:e.other.label,other:e.other})};var s=n.extend({type:"Notification",selectedOption:0,onSelect:void 0},e),p=this.item.children(".ORInput"),f=n('<div class="uiRadioChoice uiMultiOption uiGeneric ui'+this.parentType+" ui"+this.type+'"></div>').appendTo(p);this.currentContainer=f,this.optionsContainer=n('<div class="Options '+(0==e.showIcon?"IconLess":"")+'"><ul></ul></div>').appendTo(f),"Binary"==this.parentType&&(s.options=[],"BinaryYesNo"==e.type?(s.options.push({label:'<div class="Icon ORFontIcon OptionYes"></div><div class="IconText">'+r+"</div>",Value:"Yes"}),s.options.push({label:'<div class="Icon ORFontIcon OptionNo"></div><div class="IconText">'+l+"</div>",Value:"No"})):"BinaryGender"==e.type?(s.options.push({label:'<div class="Icon ORFontIcon OptionFemale"></div><div class="IconText">'+d+"</div>",Value:"Female"}),s.options.push({label:'<div class="Icon ORFontIcon OptionMale"></div><div class="IconText">'+c+"</div>",Value:"Male"})):"BinaryTrueFalse"==e.type&&(s.options.push({label:'<div class="Icon ORFontIcon OptionTrue"></div><div class="IconText">'+u+"</div>",Value:"True"}),s.options.push({label:'<div class="Icon ORFontIcon OptionFalse"></div><div class="IconText">'+h+"</div>",Value:"False"}))),s.randomize&&t.randomizeArray(s.options),n.each(s.options,(function(e,t){o.createOption({label:t.label,value:t.value,extra:t.extra})})),this.setOther(e.other.show)},this.rank=function(e){var o=this;e=n.extend({type:"RadioText",options:[],randomize:!1,headerStyle:"TwoLabels",headerLabels:"",headerCategory:p,levels:5},e),this.options=e,this.type=this.options.type,n.extend(this,new i.base(e)),this.value="",this.createOption=function(e){var t=n.extend({label:a,value:"",extra:"",selected:!1},e),i='<div class="Legend">'+t.label+"</div>";"RateRadioImage"==o.type?i='<div class="Image"><img src="'+t.extra+'"></div>'+i:"RateRadioVideo"==o.type&&(i='<div class="Video">'+("YouTube"===t.extra[0]?'<iframe width="320" height="180" src="http://www.youtube.com/embed/'+t.extra[1]+'?rel=0" frameborder="0" allowfullscreen></iframe>':'<iframe src="http://player.vimeo.com/video/'+t.extra[1]+'" width="320" height="180" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>')+"</div>"+i);var s=n('<li class="Option Content">  <div class="OptionContent Rounded8px">    <div class="CellLabel">'+i+'</div>    <div class="CellCheckGroup"><table><tr></tr></table></div>  </div></li>').appendTo(this.optionsContainer.children("ul")).data({label:t.label,value:t.value,extra:t.extra});return o.setLevels(o.options.levels,s),s},this.setLevels=function(e,t){void 0===t&&(t=o.optionsContainer.children("ul").children("li:not(.Header)")),n(t).each((function(){for(var t=n(this).find(".CellCheckGroup tr").empty(),i=0;i<e;++i)n('<td class="Rounded5px "><div class="CellCheck"><span class="CheckMark ORFontIcon"></span></div></td>').appendTo(t).on({click:o.optionClickEvent})})),e!=o.options.levels&&(o.options.levels=e,o.setHeaderStyle(o.options.headerStyle))},this.setHeaderStyle=function(e){var t=this.optionsContainer.children("ul").children("li").first(),i=e!=o.options.headerStyle,s=t.find(".CellHeadings tr");(i||0==s.length)&&(s=n("<table><tr></tr></table>").appendTo(t.find(".CellHeadings").empty()).find("tr"),i=!0);var a=s.children().length;switch(o.useHeaderAsLabels=o.options.levels===a,e){case"EachCell":case"OneToN":var r=a-o.options.levels;if(0!=a||3!=o.options.levels){if(r>0)for(var l=0;l<r;++l)s.children(":last").remove();else if(r<0)for(l=0;l<-r;++l)s.append("<td>"+("EachCell"!=e?l+a+1:".")+"</td>");break}case"TwoLabels":case"ThreeLabels":i&&(n('<td class="HeadingLeft">'+f+"</td>").appendTo(s),"ThreeLabels"!=e&&"EachCell"!=e||n('<td class="HeadingCenter">'+v+"</td>").appendTo(s),n('<td class="HeadingRight">'+m+"</td>").appendTo(s))}o.options.headerStyle=e},this.setHeaderLabels=function(e){this.optionsContainer.children("ul").children("li").first().find(".CellHeadings").html(e)},this.setHeaderCategory=function(e){this.optionsContainer.children("ul").children("li").first().find(".CellLabel").html(e)},this.getRateData=function(){return t.console("Getting Rate data"),{levels:o.options.levels,headerStyle:o.options.headerStyle,headerLabels:this.optionsContainer.children("ul").children("li").first().find(".CellHeadings").html(),headerCategory:this.optionsContainer.children("ul").children("li").first().find(".CellLabel").html()}},this.optionClickEvent=function(e){n(this).closest("table").find(".CellCheck").removeClass("Selected"),n(this).find(".CellCheck").addClass("Selected");var t=n(this).closest(".Option.Content").data("label"),i=n(this).parent().find(".CellCheck").map((function(){return n(this).hasClass("Selected")})).get().indexOf(!0)+1;o.useHeaderAsLabels&&(i=o.optionsContainer.children("ul").children("li").first().find(".CellHeadings tr > td").eq(i-1).html()),e.stopPropagation(),void 0!==o.events.activate&&o.events.activate(o.currentContainer),o.events.valueSet({value:{label:t,index:i},caller:o.currentContainer,relatedItemId:o.getItemId(),remainInItem:!o.hasValue()})},this.hasValue=function(){return o.optionsContainer.children("ul").children("li").slice(1).find(".CellCheckGroup").filter((function(){return n(this).find(".Selected").length>0})).length==o.optionsContainer.children("ul").children("li").length-1},this.getValue=function(){t.console("Getting rank value");var e={};return o.optionsContainer.children("ul").children("li").slice(1).each((function(t){e[n(this).data("label")]=n(this).find(".CellCheck").map((function(){return n(this).hasClass("Selected")})).get().indexOf(!0)})),e},this.reset=function(){o.optionsContainer.children("ul").children("li").slice(1).each((function(){n(this).find(".CellCheck").removeClass("Selected")}))},this.setValue=function(e){o.value=e};var s=n.extend({type:"Notification",selectedOption:0,onSelect:void 0},e),r=this.item.children(".ORInput"),l=n('<div class="uiRadioChoice uiMultiOption uiGeneric ui'+this.type+' uiCellCheckGroup"></div>').appendTo(r);this.currentContainer=l,this.optionsContainer=n('<div class="Options"><ul></ul></div>').appendTo(l),n('<li class="Option Header">  <div class="OptionContent Rounded8px">    <div class="CellLabel"></div>    <div class="CellHeadings"></div>    <div class="CellClose"></div>  </div></li>').appendTo(this.optionsContainer.children("ul")),s.randomize&&t.randomizeArray(s.options),n.each(s.options,(function(e,t){o.createOption({label:t.label,value:t.value,extra:t.extra})})),this.optionsContainer.on({mouseenter:function(){n(this).find("li").each((function(){var e=n(this).find(".OptionContent").innerHeight();n(this).find("table").css({height:e})}))}}),this.setHeaderLabels(this.options.headerLabels),this.setHeaderCategory(this.options.headerCategory),this.setHeaderStyle(this.options.headerStyle)},this.selector=function(e){n.extend(this,new i.base(e));var t=this.item,o=this,s=n.extend({id:"NotAvailable",description:"Description of the command",enabled:!0,horizontal:!0},e);this.options=s.options,this.selectedValue,this.setSelectedItem=function(e,i){for(var a=n.extend({skipEvents:!1},i),r=0;r<this.options.length;++r)if(e==this.options[r].value){t.find(".SelectedItem").text(this.options[r].label),o.selectedValue=this.options[r].value;break}a.skipEvents||void 0===s.command||s.command(e)},this.loadData=function(){var e=t.find(".DropDownOptions ul");e.empty();for(var i=0;i<o.options.length;++i){var s,a=!1;"object"!=typeof o.options[i]?o.options[i]={html:o.options[i],label:o.options[i],value:o.options[i]}:"SEPARATOR"==o.options[i].value?(o.options[i]={html:'<div class="Separator Rounded5px">'+o.options[i].label+"</div>",label:"Separator",value:0},a=!0):null==o.options[i].value&&(o.options[i].value=o.options[i].label),s=n("<li>"+o.options[i].html+"</li>").data("value",o.options[i].value).data("label",o.options[i].label).appendTo(e),0==a?s.on("click",(function(e){var i=n(this).data("value");o.setSelectedItem(i),t.find(".DropDownContainer").slideToggle("fast"),e.stopPropagation()})):s.addClass("Special")}},this.getValue=function(){return o.selectedValue},this.setValue=function(e,t){o.setSelectedItem(e,t)},this.getLabel=function(){return t.find(".SelectedItem").first().text()},t.addClass("SelectorItem").children(".ORInput").append('<div class="Selector"><table><tr><td><div class="SelectedItem"></div></td><td class="DropDownArrowCell"><div class="DropDownArrow Icon"></div></td></tr></table></div><div class="DropDownContainer InputShadow"><div class="DropDownOptions Scrollable"><ul></ul></div></div>'),t.find(".DropDownContainer"),this.loadData(),this.options.length>0&&(null!=s.value?this.setSelectedItem(s.value,{skipEvents:!0}):this.setSelectedItem(this.options[0].value,{skipEvents:!0})),t.find(".DropDownContainer").on({click:function(e){e.stopPropagation()},dblclick:function(e){e.stopPropagation()}}),t.find(".ORInput").on("click",(function(e){n(".DropDownContainer").not(t.find(".DropDownContainer")).slideUp("fast"),t.find(".DropDownContainer").slideToggle("fast"),e.stopPropagation()})),void 0!==s.value&&this.setValue(s.value,{skipEvents:!0})},this.checkbox=function(e){n.extend(this,new i.base(e));var o=n.extend({id:"Unset",description:"Description of the command",command:void 0,value:!1},e),s=this,a=this.item;this.toggleSelection=function(e,n){t.console("Selecting box "+o.id),s.setValue(!a.find(".BoxMark").hasClass("Selected"))},this.reset=function(){return a.find(".BoxMark").removeClass("Selected")},this.getValue=function(){return a.find(".BoxMark").hasClass("Selected")},this.setValue=function(e,t){var i=n.extend({skipEvents:!1},t),r=a.find(".BoxMark");e?r.addClass("Selected"):r.removeClass("Selected"),i.skipEvents||void 0===o.command||o.command(s.getValue())},a.addClass("BooleanItem").find(".ORInput").remove(),a.prepend('<div class="BoxMark"><div class="CheckMark ORFontIcon"></div></div>'),a.children().wrapAll('<div class="Checkbox" />'),a.append('<div style="clear: both;" />'),void 0!==o.positionY&&a.css({position:"absolute",left:o.positionX,top:o.positionY}),a.on({click:this.toggleSelection})},this.label=function(e){n.extend(this,new i.base(e)),n.extend({id:"NotAvailable"},e),this.item.addClass("LabelItem").children(".ORInput").remove()},this.input=function(e){n.extend(this,new i.base(e)),e=n.extend({id:t.randomId(),size:"",defaultValue:"",placeholder:"",controlClass:"",description:"Description of the command"},e);var o=this,s=this.item;this.defaultValue=e.defaultValue,this.defaultValueEvents={focus:function(){s.children(".ORInput").children(".InputField").attr("value")==o.defaultValue&&o.setValue("")},blur:function(){""==o.getValue()&&o.setValue(o.defaultValue)}},this.getValue=function(){var e=s.children(".ORInput").children(".InputField").val();return e!=o.defaultValue?e:""},this.reset=function(){s.children(".ORInput").children(".InputField").val(o.defaultValue)},this.setValue=function(e,t){var i=n.extend({skipEvents:!1},t),a=s.children(".ORInput").children(".InputField");return a.attr("value",e),e!=this.defaultValue?a.addClass("HasValue"):a.removeClass("HasValue"),i.skipEvents||o.events.valueSet({value:e,caller:this.currentContainer,relatedItemId:this.getItemId()}),s},this.setDefaultValue=function(e){o.defaultValue=e,o.setValue(e),""!=e?s.children(".ORInput").children(".InputField").on(o.defaultValueEvents):s.children(".ORInput").children(".InputField").off(o.defaultValueEvents)};var a=this.item.addClass("InputItem").children(".ORInput");this.currentContainer=n('<input class="InputField '+e.controlClass+'" id="Text'+e.id+'" '+(void 0!==e.placeholder?'placeholder="'+e.placeholder+'" ':"")+' type="text" />').appendTo(a),s.addClass(e.size),""!=this.defaultValue&&this.setDefaultValue(this.defaultValue),s.children(".ORInput").children(".InputField").on({change:function(){o.setValue(n(this).val())}}),void 0!==e.value&&this.setValue(e.value,{skipEvents:!0})},this.textArea=function(e){e=n.extend({controlClass:"",placeholder:"",id:t.randomId()},e);var o=this;n.extend(this,new i.input(e));var s=this.item.removeClass("InputItem").addClass("TextAreaItem").children(".ORInput").empty();this.currentContainer=n('<textarea class="InputField '+e.controlClass+'" id="TextArea'+e.id+'" placeholder="'+e.placeholder+'" />').appendTo(s),this.item.find("textarea").on({change:function(){o.setValue(n(this).val())}}),this.reset=function(){o.item.find("textarea").attr("value",o.defaultValue)},""!=this.defaultValue&&this.setDefaultValue(this.defaultValue)},this.textEditor=function(e){n.extend(this,new i.base(e));var o=n.extend({id:t.randomId(),size:"",defaultValue:"",height:120},e),s=this.item,a=this;this.defaultValue=o.defaultValue,this.defaultValueEvents={focus:function(e){s.editor.instanceById("TextArea"+o.id).getContent()==a.defaultValue&&a.setValue("")},blur:function(){""==a.getValue()&&a.setValue(a.defaultValue)}},this.setDefaultValue=function(e){a.setValue(e),a.defaultValue=e,""!=e?s.find(".ORInput .nicEdit-main").on(a.defaultValueEvents):s.find(".ORInput .nicEdit-main").off(a.defaultValueEvents)},this.getValue=function(){var e=s.editor.instanceById("TextArea"+o.id).getContent();return e!=a.defaultValue&&"<br>"!=e?e:""},this.setValue=function(e){return t.console("textEditor - Setting value to "+e),s.editor.instanceById("TextArea"+o.id).setContent(e)},this.item.addClass("TextEditor").children(".ORInput").append('<textarea id="TextArea'+o.id+'"></textarea>'),s.addClass(o.size),n((function(){t.console("textEditor - Creating");var e="100%";s.editor=new nicEditor({height:o.height,maxHeight:o.height,iconsPath:"/scripts/nicedit/nicEditorIcons.gif"}).panelInstance("TextArea"+o.id),t.console("textEditor - Width is 100%");var n=s.find(".ORInput").first().children();n.eq(0).css("width",e),n.eq(1).css("width",e),n.eq(0).children().first().css("border-color","").css("border-width","").addClass("EditorToolbar"),n.eq(1).css("border-color","").css("border-width","").addClass("EditorArea"),s.find(".ORInput .nicEdit-main").width(e).on({focus:function(){s.find(".ORInput").first().addClass("Selected")},blur:function(){s.find(".ORInput").first().removeClass("Selected")},mousedown:t.stopPropagation,click:t.documentClick}),""!=a.defaultValue&&(t.console("textEditor - Setting balue "+a.defaultValue),a.setDefaultValue(a.defaultValue))}))},this.spinner=function(e){n.extend(this,new i.base(e));var o=n.extend({id:"NotAvailable",displayTime:!1,maxValue:void 0,minValue:void 0,increment:1,fastIncrement:5,value:0,zeroIsUnlimeted:!0,repeatDelay:200,format:"numeric",zeroLabel:s},e),a=this.item,r=this;this.value=o.value,this.currentIntervalIncrement=0,this.currentIntervalDecrement=0,this.incrementHandler=function(e,t){r.changeValue(o.increment)},this.incrementPressedHandler=function(e,t){r.currentIntervalIncrement=setInterval((function(){r.changeValue(o.fastIncrement*o.increment)}),o.repeatDelay)},this.incrementReleasedHandler=function(){clearInterval(r.currentIntervalIncrement)},this.decrementHandler=function(e,t){r.changeValue(-o.increment)},this.decrementPressedHandler=function(e,t){r.currentIntervalDecrement=setInterval((function(){r.changeValue(-o.fastIncrement*o.increment)}),o.repeatDelay)},this.decrementReleasedHandler=function(){clearInterval(r.currentIntervalDecrement)},this.wheelHanlder=function(e,t){return r.changeValue(o.increment*t),!1},this.changeValue=function(e){var t=r.getInputValue()+e;null!=o.minValue&&t<o.minValue&&(t=o.minValue),null!=o.maxValue&&t>o.maxValue&&(t=o.maxValue),r.setValue(t)},this.getInputValue=function(){var e=a.find("input").val();if(e==o.zeroLabel)return 0;if("time"==o.format){var n=e.split(/\:/),i=Number(n[0]),s=Number(n[1]),r=Number(n[2]);return t.console("Time stepper:  "+i+"_"+s+"_"+r),3600*i+60*s+r}return parseInt(e)},this.setValue=function(e,t){var i,s=n.extend({skipEvents:!1},t);if(0==e&&o.zeroIsUnlimeted)i=o.zeroLabel;else if("time"==o.format){var l=parseInt(e/3600),d=parseInt(e/60)%60,c=e%60;i=l+":"+(d<10?"0":"")+d+":"+(c<10?"0":"")+c}else i=e;return a.find("input").val(i),s.skipEvents||(a.find("input").trigger("change"),void 0!==o.command&&o.command(e)),r},this.getValue=function(){return r.getInputValue()},a.addClass("Spinner").find(".ORInput").append('<table><tr><td class="Less"><div class="Icon"></div></td><td class="Field"><div><input type="text" /></div></td><td class="More"><div class="Icon"></div></td></tr></table>'),a.find("input").on({click:function(e){n(this).select()},focus:function(e){a.find(".ORInput .Field div").addClass("Selected")},blur:function(e){a.find(".ORInput .Field div").removeClass("Selected")}}),a.find(".ORInput .Less").on({click:this.decrementHandler,mousedown:this.decrementPressedHandler,mouseup:this.decrementReleasedHandler,mouseleave:this.decrementReleasedHandler}),a.find(".ORInput .More").on({click:this.incrementHandler,mousedown:this.incrementPressedHandler,mouseup:this.incrementReleasedHandler,mouseleave:this.incrementReleasedHandler}),a.find(".ORInput").on("mousewheel",this.wheelHanlder),this.setValue(this.value,{skipEvents:!0})},this.dateTime=function(e){n.extend(this,new i.input(e));var t=n.extend({id:"NotAvailable",displayTime:!1,controlClass:""},e),o=this.item;o.addClass("DateTimeSelector").find(".ORInput").append('<input type="text" class="'+t.controlClass+'" id="Time'+t.id+'" />'),o.find(".ORInput").addClass("DateTime");var s=o.find(".ORInput").children("input").eq(0).addClass("DateField"),a=o.find(".ORInput").children("input").eq(1).addClass("TimeField");n((function(){s.datepicker({showAnim:"slideDown",duration:200}),a.timepicker({showAnim:"slideDown",duration:200,defaultTime:"00:00"})})),this.getValue=function(){if(s.datepicker("getDate")){var e=s.datepicker("getDate");return e.setHours(a.timepicker("getHour")),e.setMinutes(a.timepicker("getMinute")),e.toString()}},this.setValue=function(e){if(e){var t=new Date(e);s.datepicker("setDate",t),a.timepicker("setTime",t.getHours()+":"+t.getMinutes())}}}}var I={};function y(e){!function(){for(var e=3,t=document.createElement("div"),n=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",n[0];);}();var n="active",i=e||{},s=i.surveyId,a=i.containerId,r=(65536*(1+Math.random())|0).toString(16).substring(1);void 0===a&&void 0===i.container&&(a="ORMainContainer"+r,document.write('<div class="ORMainContainer" id="'+a+'"></div>')),i.status=i.status||{},i.alwaysShow=i.alwaysShow||!1;var l=function(e){e=t().extend({type:"Error",message:"Sorry, but there was an error processing the survey",autoHide:0,surveyContainer:void 0,animationDelay:300},e);var n=this;this.destroy=function(){n.notifyElement.remove()},this.hide=function(){n.notifyElement.hide(0,e.animationDelay/1.5,(function(){n.destroy(),n.updatePositions()}))},this.updatePositions=function(){var e=0;t()(".ORNotify").each((function(){var n=t()(this).data("notifyData").notifyElement;n.css({top:e}),e+=n.height()+5}))},e.surveyContainer;var i=0;t()(".ORNotify").each((function(){i+=t()(this).data("notifyData").notifyElement.height()+5}));var o=t()('<div class="ORNotify OR'+e.type+'">  <div class="ORNotifyMessage">'+e.message+'    <div class="ORNotifyClose">&#10006;</div>  </div></div>').appendTo(e.surveyContainer);this.notifyElement=o,o.css("top",i+"px").hide(0).fadeIn(e.animationDelay),o.find(".ORNotifyMessage > .ORNotifyClose").on({click:function(e){n.hide(0)}}),o.data("notifyData",this),this.updatePositions(),e.autoHide>0&&window.setTimeout(n.hide,e.autoHide)},d=function(e){var i=this;i.render={};var a=function(e){};e.events=t().extend({onFirstItemChange:a,onItemChange:a,onSurveyFinish:a},e.events),e=t().extend(!0,{height:e.minimalSize||e.expandable?0:300,autoHide:!0,animation:{enable:!0,show:{delay:1e3,transition:200},resize:{delay:0,transition:500},item:{delay:0,transition:500},hide:{delay:2e3,transition:200},reject:{delay:500,transition:150}},controlClass:"ORControl"},e),i.options=e,i.status="loaded";var r=new o(t());this.ui=new g(t(),r),e.container.css({opacity:0}),function(e,t,n){var i=/\+/g;function o(e){return e}function s(e){return decodeURIComponent(e.replace(i," "))}e.cookie=function(n,i,a){if(void 0!==i&&!/Object/.test(Object.prototype.toString.call(i))){if(a=e.extend({},e.cookie.defaults,a),null===i&&(a.expires=-1),"number"==typeof a.expires){var r=a.expires,l=a.expires=new Date;l.setDate(l.getDate()+r)}return i=String(i),t.cookie=[encodeURIComponent(n),"=",a.raw?i:encodeURIComponent(i),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}for(var d,c=(a=i||e.cookie.defaults||{}).raw?o:s,u=t.cookie.split("; "),h=0;d=u[h]&&u[h].split("=");h++)if(c(d.shift())===n)return c(d.join("="));return null},e.cookie.defaults={},e.removeCookie=function(t,n){return null!==e.cookie(t,n)&&(e.cookie(t,null,n),!0)}}(t(),window.document),this.ajaxErrorHandler=function(e,t,n){new l({surveyContainer:i.container,message:"There was an error processing the survey",autoHide:4500})},this.randomizeItems=function(e){!function n(i){var o=[];t()(e).each((function(){this.parentItemId==i.id&&o.push(this.order)})),r.randomizeArray(o),t()(e).each((function(e){this.parentItemId==i.id&&(this.order=o[e],n(this))}))}({id:"0"})},this.loadSurvey=function(){i.uiItems={},i.responses={},void 0===e.data?fetch("/respondant/"+i.options.id).then((e=>e.json())).then((function(n){i.loaded=!0,i.settings=n.survey.settings,i.items=n.survey.items,localStorage.setItem("ORResponsesSessionJWT",n.token),i.sessionCookie=n.sessionCookie,i._id=n.survey._id,i.shortId=n.survey.shortId,i.theme=e.theme||i.settings.theme,i.template=e.template||i.settings.template,i.overrideDefaultValue("template",["Simple","Slim","Modern","ButtonLess","Cool"]),i.html=e.templates[i.template].html,i.settings.enableItemRandomize&&i.randomizeItems(i.items),i.render=t().extend(n.render,i.render),i.loadUserStyleSheets(i.renderSurvey)})):(r.console("- PREVIEW MODE Launching"),i.preview=!0,i.settings=e.data.settings,i.items=e.data.items,i.theme=i.settings.theme,i.template=i.settings.template,i.overrideDefaultValue("template",["Simple","Slim","ButtonLess"],!0),i.html=e.templates[i.template].html,i.render={finished:!0},i.loadUserStyleSheets(i.renderSurvey),r.console("- PREVIEW MODE Launched")),i.render.activeChild=0},this.getResponses=function(){return t().extend(!0,{},i.responses)},this.resetResponses=function(){i.responses={},t().each(i.uiItems,(function(){this.reset()}))},this.getItem=function(e,n){t()(i.items).filter((function(){return"parent"==e&&this.parentItemId==n.parentItemId&&this.order==n.order}))},this.overrideDefaultValue=function(t,n,o){void 0!==e[t]&&(n.indexOf(e[t])>=0?(o?i[t]=e[t]:i.settings[t]=e[t],r.console(" - Option "+t+" <- "+e[t])):r.console("Provided "+t+" is not valid"))},this.loadUserStyleSheets=function(e){var n,o;n="/respondant-"+i.template.toLowerCase()+"-"+i.theme.toLowerCase()+".css",(o=document.createElement("link")).setAttribute("type","text/css"),o.setAttribute("rel","stylesheet"),o.setAttribute("href",n),o.setAttribute("media","none"),o.setAttribute("onload","if(media!='all')media='all'"),t()("head").append(o),e()},this.showSurvey=function(){i.options.container.css({opacity:1})},this.hideSurvey=function(){if(i.options.container.css({opacity:0}),i.isAnimated()){var t=e.animation["rejected"===n?"reject":"hide"];i.options.container.css({transitionProperty:"opacity",transitionDelay:t.delay+"ms",transitionDuration:t.transition+"ms"})}},this.setRejected=function(){n="rejected",i.setCookieStatus("rejected")},this.isAnimated=function(){return i.options.animation.enable},this.renderSurvey=function(){function n(){var e=(i.content.parent().height()-i.contentItems.find(".ORItemContainer").first().outerHeight(!0))/2;i.isAnimated()&&i.content.css({transitionProperty:"none"}),i.content.css({marginTop:e+"px"}),i.isAnimated()&&setTimeout((function(){i.content.css({transitionProperty:"margin-top"})}),0)}i.overrideDefaultValue("scrollingMode",["Smart","Block","Classic"]),e.container.empty(),i.html=t()(i.html).appendTo(e.container),i.container=t()('<div class="ORSurveyContainer'+(i.isAnimated()?" Animated":"")+' ORHide"></div>').appendTo(i.html.find(".ORSurveyContent")),i.main=t()('<div class="ORMain"></div>').appendTo(i.container),i.content=t()('<div class="ORContent"></div>').appendTo(i.main),i.isAnimated()&&i.content.css({transitionDelay:e.animation.item.delay+"ms",transitionDuration:e.animation.item.transition+"ms"}),i.contentItems=t()('<div class="ORContentItems"></div>').appendTo(i.content),0!==e.height&&i.container.css({height:e.height}),i.html.find(".ORLeft").on("click",{fromButton:!0},i.handlePrevious),i.html.find(".ORRight").on("click",{fromButton:!0},i.handleNext),"Classic"!=i.settings.scrollingMode?i.main.addClass("WithAutoScroll"):i.content.css("overflow-y","auto"),i.footer=t()('<div class="ORFooter Rounded5px"><a href="https://overresponse.com" target="_blank"><img width="15" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAMCAYAAAC9QufkAAAABHNCSVQICAgIfAhkiAAAAUBJREFUKJGN0j9IVQEUx/HPvT7zwRsc/Ee4hjXq+AgHFyfL2VDSxULCRRJ8EdTgfYOTIAhBhE3q4OYgRFCBDeLgJGlLvqkEJcESe93b8K7ivycdONPvfM/vd+AE/qMmuRvyqEznc25iC4+D66ApcmVmE/oDfid8eMHOMT04qgqn4ArymLnByzH2UnkWDzPV4D+8CsjHDD/j9RmpEw/w/kqwSG9EPMBntKMN9zGPvyjh1iVwkZoim0+JMyTO9680cgNcir3NvRrulJguM4p1zOEbPuLnyWxmkq6A5gILEDIU8+M242hFLzbw6aJRUGQlIZ+h45DvWXYT3hQYQRPWUJ/efG5BGPIEyizXMRiQDVlO9V104wDvUEDtqTNElYGlkFxCjMYJ9s+YtOBtuuirypN8OVUj2iLmokrMatWHVWThH253VbQSjCBUAAAAAElFTkSuQmCC" /></a></div>').insertAfter(i.content),!0===e.fullScreen?t()("body").on("mousewheel",i.wheelHandler):i.container.on("mousewheel",i.wheelHandler),void 0!==i.settings.closingText&&""!=i.settings.closingText||(i.settings.closingText="Hey, thanks!"),i.isAnimated()?setTimeout((function(){e&&(e.animation.enable&&e.container.css({transitionProperty:"opacity",transitionDelay:e.animation.show.delay+"ms",transitionDuration:e.animation.show.transition+"ms"}),i.renderItems(),n(),i.showSurvey())}),e.animation.show.delay):(i.renderItems(),n())},this.renderItems=function(){i.container.addClass("Desktop"),i.container.addClass("Expand"),void 0!==i.settings.introText&&""!=i.settings.introText?i.renderItem({itemType:"Intro"}):(i.render.currentItem="First",i.navigate())},this.renderItem=function(n){n=t().extend({parentItemId:"0"},n);var o,s=t()('<div class="ORItemContainer ORItemId'+n.id+" Rounded5px "+n.itemType+'"></div>');"Intro"!=n.itemType&&"Matrix"!=n.itemType&&"Group"!=n.itemType&&s.addClass(n.layout,n.orientation),s="0"!=n.parentItemId?s.appendTo(i.contentItems.find(".ORItemId"+n.parentItemId).find(".ORTableRow").eq(n.cell.y).children(".ORTableCell").eq(n.cell.x)):s.appendTo(i.contentItems),"Intro"!=n.itemType&&"Label"!=n.itemType&&"Matrix"!=n.itemType&&"Group"!=n.itemType&&("Left"!=n.layout&&"Right"!=n.layout&&"Bottom"!=n.layout||s.append('<div class="ORLabel">'+n.label+"</div>"),o=t()('<div class="OR'+n.itemType+' ORChoice ORGeneric"></div>').appendTo(s),"Top"==n.layout&&s.append('<div class="ORLabel">'+n.label+"</div>"));var a={id:n.id,type:n.itemType,container:o,required:n.required,randomize:i.settings.enableOptionRandomize,controlClass:e.controlClass,events:{activate:i.handleActive,valueSet:i.handleNext}};switch(n.itemType){case"Intro":s.addClass("Virtual"),void 0!==i.settings.title&&s.append('<div class="ORSurveyTitle">'+i.settings.title+"</div>"),void 0!==i.settings.introText&&s.append('<div class="ORSurveyIntro">'+i.settings.introText+"</div>");var r=t()('<div class="ORCommandButton ORBeginButton"></div>').appendTo(s);t()('<button class="'+e.controlClass+'">Begin Survey</button>').appendTo(r).on("click",i.handleStart);break;case"Closing":s.addClass("Virtual").addClass("ORHide"),s.append('<div class="ORSurveyClosing">'+i.settings.closingText+"</div>");break;case"Finish":r=t()('<div class="ORCommandButton ORBeginButton"></div>').appendTo(s),t()('<button class="'+e.controlClass+'">Finish</button>').appendTo(r).on("click",i.handleFinish);break;case"Empty":s.append('<div class="ORSurveyEmpty">This survey is empty :P</div>');break;case"Label":s.append('<div class="ORLabel">'+n.label+"</div>");break;case"RadioText":case"RadioImage":case"RadioHTML":case"RadioVideo":case"ListText":case"ListImage":case"ListVideo":case"ListHTML":case"BinaryYesNo":case"BinaryGender":case"BinaryTrueFalse":case"ListCheck":case"DropDown":"DropDown"==n.itemType?i.uiItems[n.id]=new i.ui.dropDown(t().extend({defaultLabel:"Select an option",options:n.choice.options,other:n.choice.other},a)):i.uiItems[n.id]=new i.ui.listChoice(t().extend({options:n.choice.options,multiSelect:n.choice.multiSelect,showIcon:n.choice.showIcon,other:n.choice.other},a));break;case"OpenSingleLine":case"OpenMultipleLine":case"OpenRichText":a=t().extend({container:o,required:n.required,size:n.open.size,placeholder:n.open.defaultText},a),"OpenSingleLine"==n.itemType?i.uiItems[n.id]=new i.ui.input(a):"OpenRichText"==n.itemType?i.uiItems[n.id]=new i.ui.textEditor(a):i.uiItems[n.id]=new i.ui.textArea(a);break;case"RateRadioText":case"RateRadioImage":case"RateRadioVideo":case"RateRadioHTML":i.uiItems[n.id]=new i.ui.rank(t().extend({options:n.choice.options,multiSelect:n.choice.multiSelect,showIcon:n.choice.showIcon,levels:n.rate.levels,headerStyle:n.rate.headerStyle,headerLabels:n.rate.headerLabels,headerCategory:n.rate.headerCategory},a));break;case"Group":n.matrix={rows:1,cols:1};case"Matrix":for(var l=t()('<div class="ORTable OR'+n.itemType+'Table"></div>').appendTo(s),d=0;d<n.matrix.rows;++d)for(var c=t()('<div class="ORTableRow"></div>').appendTo(l),u=0;u<n.matrix.cols;++u){var h=t()('<div class="ORTableCell"></div>').appendTo(c);"Matrix"==n.itemType&&n.matrix.widths[u].dimension>0&&(h.css("width",""+n.matrix.widths[u].dimension+i.decodeUnit(n.matrix.widths[u].unit)),"Pixels"==n.matrix.widths[u].unit&&l.css("width","auto"))}break;default:s.append('<div class="ORSurveyItem">'+n.id+" "+n.itemType+" "+n.order+" not implemented</div>")}s.data("item",{id:n.id,itemType:n.itemType,parentItemId:n.parentItemId,visibility:n.visibility}),s.on({click:function(){i.handleActive(t()(this))}}),"Intro"==n.itemType?i.render.currentItem="First":"Closing"==n.itemType?i.render.currentItem="Last":i.render.currentItem=n.id,"Intro"!=n.itemType&&"Label"!=n.itemType&&"Matrix"!=n.itemType&&"Group"!=n.itemType&&s.append('<div class="ORClearFloat" />')},this.applyRules=function(){i.contentItems.find(".ORItemContainer").each((function(){var e=t()(this).data("item"),n=t()(this),o=function(){n.css("display",i.settings.showHiddenItemsAsDisabled?"block":"none").addClass("ORInvisible")},s=n.parent().closest(".ORItemContainer");if(s.length>0&&s.hasClass("ORInvisible"))o();else if(i.isItemActivable(e)&&void 0!==e.visibility&&e.visibility.rules.length>0){var a=!1;t().each(e.visibility.rules.map((function(e,n){var o=!0;return t().each(Object.keys(e.ruleSet).map((function(n){var o=e.ruleSet[n];if(void 0!==i.responses[n]){if(t().isArray(o))return r.areArraysEqual(o,i.responses[n]);if("object"==typeof o){var s=!0;return t().each(o,(function(e,t){t>=0&&(s=s&&i.responses[n][e]==t)})),s}return i.responses[n]==o}return!1})),(function(e,t){o=o&&t})),o})),(function(e,t){a=a||t})),r.console("ruleSet for "+e.id+" is "+a),(e.visibility.inverted?!a:a)?n.css("display","block").removeClass("ORInvisible"):o()}}))},this.navigate=function(){var e;i.render.activeChild++,"First"===i.render.currentItem?(i.contentItems.hide(),i.contentItems.empty(),i.items=(e=[],function n(o){var s=t()(i.items).filter((function(){return this.parentItemId==o.id})).get();s.sort((function(e,t){return parseInt(e.cell.y)>parseInt(t.cell.y)?1:parseInt(e.cell.y)<parseInt(t.cell.y)?-1:parseInt(e.cell.x)>parseInt(t.cell.x)?1:parseInt(e.cell.x)<parseInt(t.cell.x)?-1:parseInt(e.order)>parseInt(t.order)?1:-1})),"0"!=o.id&&(e=e.concat(o));for(var a=0;a<s.length;++a)n(s[a])}({id:"0"}),e),i.displayItems(),i.hasClosing()&&(i.renderItem({itemType:"Closing"}),"Classic"===i.settings.scrollingMode&&i.contentItems.find(".Closing").css({display:"none"})),0==i.items.length&&i.renderItem({itemType:"Empty"}),"Classic"==i.settings.scrollingMode?i.render.finished&&i.renderItem({itemType:"Finish"}):t()('<div class="OREndSpacer" />').appendTo(i.contentItems),i.contentItems.show(),i.adjustContainerHeight()):i.displayItems()},this.displayItems=function(){"Classic"==i.settings.scrollingMode?i.settings.visibleItems=999:i.settings.visibleItems=15;for(var e=25,t=i.countVisibleItems(),n=i.countRemainingItems();n>0&&e>0;){r.console("Visible items: "+t),r.console("Rendering item "+i.getNextItemToRenderIndex());var o=i.getNextItemToRenderIndex();o<i.items.length&&i.renderItem(i.items[o]),n=i.countRemainingItems(),t=i.countVisibleItems(),r.console("Remaining items: "+n),--e}i.applyRules()},this.itemAnsweredHandler=function(e){},this.countVisibleItems=function(){return i.contentItems.find(".ORItemContainer").length},this.isLastItem=function(e){return"First"!=i.render.currentItem&&void 0!==e&&e.data("item").id==i.contentItems.find(".ORItemContainer").not(".Virtual").last().data("item").id},this.isFirstItem=function(e){return 0===i.contentItems.find(".ORItemContainer.Active").length},this.isItemActivable=function(e){return-1==["Label","Group","Matrix","Intro","Finish"].indexOf(e.itemType)||"Label"==e.itemType&&"Matrix"!=i.getParentItemType(e)},this.isItemVisible=function(e){return 0===t()(i.container).find(".ORItemId"+e.id).closest(".ORItemContainer.ORInvisible").length},this.countRemainingItems=function(){return i.items.length-i.getCurrentItemIndex()-1},this.getParentItemType=function(e){return"0"==e.parentItemId?"Root":i.getItemById(e.parentItemId).itemType},this.getItemById=function(e){return t()(i.items).filter((function(){return this.id===e})).get(0)},this.getNextItemToRenderIndex=function(){return i.getCurrentItemIndex()+1},this.getCurrentItemIndex=function(){return"First"===i.render.currentItem?-1:"Last"===i.render.currentItem?i.items.length-1:i.items.map((function(e,t){return e.id})).indexOf(i.render.currentItem)},this.getNextItem=function(e){return i.getItem(e,1)},this.getPreviousItem=function(e){return i.getItem(e,-1)},this.getItem=function(e,n){var o=-1;t().each(i.items,(function(e,n){t()(i.container).find(".ORItemId"+this.id).hasClass("Active")&&(o=e)}));for(var s=o+n;s>=0&&s<i.items.length&&(!i.isItemActivable(i.items[s])||!i.isItemVisible(i.items[s]));)s+=n;return o+n===-1||o+n===i.items.length?e:t()(i.container).find(".ORItemId"+i.items[s].id)},this.adjustContainerHeight=function(n){"function"!=typeof n&&(n=function(){});var o=parseInt(i.content.css("margin-bottom").replace("px","")),s=i.footer.outerHeight();if(i.isFirstItem()&&!0===e.expandable){r.console("Resizing container first item");var a=i.contentItems.find(".ORItemContainer").not(".Group, .Matrix").first().outerHeight()+o+s;i.container.css({height:a+"px"}),n(a)}else if(e.minimalSize||e.expandable){i.isAnimated()&&(i.container.addClass("ORAnimateResize"),i.container.css({transitionDelay:e.animation.resize.delay+"ms",transitionDuration:e.animation.resize.transition+"ms"}));var l=i.container.height(),d=i.contentItems.find(".ORItemContainer").not(".Group, .Matrix").get().map((function(e,n){return t()(e).outerHeight()})),c=Math.max.apply(null,d)+o+s;c>l?(i.container.css({height:c}),n(c)):n()}else n()},this.handleActive=function(e){e.hasClass("ORItemContainer")||(e=e.closest(".ORItemContainer")),i.isItemActivable(e.data("item"))&&(e.hasClass("Active")||(i.contentItems.find(".ORItemContainer").removeClass("Active"),e.addClass("Active"),"loaded"==i.status&&(i.status="started"),"Smart"==i.settings.scrollingMode&&i.scrollSurvey(e)))},this.scrollSurvey=function(t,n,o,s){if(0!=t.length){i.navigate(),i.render.containerHeight=o||i.content.parent().height();var a=i.contentItems.children(".ORItemContainer").first().position().top;i.contentItems.find(".ORItemContainer").removeClass("Active");var r=t.addClass("Active");r.hasClass("Closing")&&(r.removeClass("ORHide").addClass("ORShow"),!1!==e.autoHide&&!1===e.fullScreen&&i.hideSurvey()),void 0!==n&&n.hasClass("Closing")&&n.removeClass("ORShow").addClass("ORHide"),"Matrix"==r.data("item").itemType&&void 0!==r.data("item").parentItemId&&0!==r.data("item").parentItemId&&(r=r.closest(".ORTableRow"));var l=r.outerHeight(!0),d=r.position().top,c=d-(i.render.containerHeight-l)/2;r.hasClass("Closing")&&(c=d-a);var u=-parseFloat((i.content.get()[0].style.marginTop||"0").replace("px",""));if(Math.abs(u-c)>3&&i.content.css({marginTop:-c+"px"}),"Smart"==i.settings.scrollingMode){if(void 0!==n){var h=n.data("item").id;void 0!==i.uiItems[h]&&void 0!==i.uiItems[h].deactivate&&i.uiItems[h].deactivate()}if(void 0!==t.data("item")){var p=t.data("item").id;void 0!==i.uiItems[p]&&void 0!==i.uiItems[p].activate&&i.uiItems[p].activate()}}}},this.handleStart=function(e){i.handleNext()},this.handleNext=function(o){if(i.status="started",o=t().extend({remainInItem:!1},o),0==i.contentItems.find(".ORItemContainer.Active").length&&i.contentItems.find(".ORItemContainer").first().addClass("Active"),void 0!==i.uiItems[o.relatedItemId]&&void 0!==s){void 0===o.relatedItemId&&(o.relatedItemId=i.render.currentItem,o.value=i.uiItems[o.relatedItemId].getValue()),i.status="started",!0!==i.preview&&!0!==i.options.testMode&&(i.setCookieStatus("started"),i.setCookieLastItem(o.relatedItemId),{value:o.value}.sessionCookie=i.sessionCookie),i.responses[o.relatedItemId]=i.uiItems[o.relatedItemId].getValue(),i.applyRules();var a={survey:{container:i.container,reject:function(){i.setRejected()}},response:{value:i.responses[o.relatedItemId]}};1==r.objectSize(i.responses)&&(r.console("Calling onFirstItemChange handler"),e.events.onFirstItemChange(a)),e.events.onItemChange(a)}"Classic"!=i.settings.scrollingMode||"First"==i.render.currentItem||"Last"==i.render.currentItem?"active"===n&&!0!==o.remainInItem?i.adjustContainerHeight((function(e){var n,s=t()();function a(e,t){if(e.is(i.contentItems.find(".ORItemContainer").last()))return!1;if(i.isLastItem(t)&&"Smart"==i.settings.scrollingMode)i.handleFinish(),s=i.contentItems.find(".ORItemContainer").last();else{if("Smart"!=i.settings.scrollingMode)return!1;s=i.getNextItem(t)}return s}var r=i.contentItems.find(".ORItemContainer.Active");void 0!==o.caller?(n=t()(o.caller).closest(".ORItemContainer"),s=!n.data("item").itemType.match(/Open/i)&&a(r,n)):r.length>0?(n=r.first(),s=a(r,n)):s=i.contentItems.find(".ORItemContainer").first(),!1!==s&&i.scrollSurvey(s,n,e)})):"rejected"===n&&i.hideSurvey():void 0!==o.data&&!0===o.data.fromButton&&i.manualScroll(1)},this.handlePrevious=function(e){if("Classic"!=i.settings.scrollingMode){i.showSurvey();var n,o=t()(),s=i.contentItems.find(".ORItemContainer.Active");s.length>0?(n=s.first()).hasClass("Virtual")?s.is(i.contentItems.find(".ORItemContainer").first())||(o=n.prev()):o=i.getPreviousItem(n):o=i.contentItems.find(".ORItemContainer").first(),i.scrollSurvey(o,n)}else void 0!==e.data&&!0===e.data.fromButton&&i.manualScroll(-1)},this.handleFinish=function(t){var n={survey:{container:i.container},responses:{value:i.responses}};r.console("Calling onSurveyFinish handler"),e.events.onSurveyFinish(n),i.setCookieStatus("finished"),i.setCookieLastItem(null),i.status="finished","Last"!=i.render.currentItem&&(i.render.currentItem="Last","Classic"===i.settings.scrollingMode&&(i.contentItems.children(".ORItemContainer:not(.Closing)").fadeOut().hide(),i.contentItems.children(".Closing").css("visibility","visible").fadeIn()))},this.hasClosing=function(){return"undefined"!=i.settings.closingText&&""!=i.settings.closingText},this.getStatusFromCookie=function(){var e=t().cookie("ORSurveyStatus"+i.shortId,{path:"/"});return void 0!==e?e:"launched"},this.setCookieStatus=function(e){t().cookie("ORSurveyStatus"+i.shortId,e,{expires:180,path:"/"})},this.setCookieLastItem=function(e){t().cookie("ORSurveyLastItem"+i.shortId,e,{expires:180,path:"/"})},this.manualScroll=function(e){i.content.css({scrollTop:i.content.scrollTop+e*parseInt(i.content.height()/2)})},this.wheelHandler=function(e){if(("loaded"!==i.status||!0!==i.options.ignoreFirstMouseScroll)&&"Classic"!=i.settings.scrollingMode){var t=e.deltaY;if(0==t)return;if(!0===i.isMouseWheelScrollInProgress)return;i.isMouseWheelScrollInProgress=!0,setTimeout((function(){i.isMouseWheelScrollInProgress=!1}),250),t>0?i.handleNext():i.handlePrevious(),e.preventDefault()}},this.decodeUnit=function(e){switch(e){case"Pixels":return"px";case"Em":return"em";default:return"%"}},this.options=e,this.loadSurvey()};this.start=function(){var e=i.container||t()("#"+a),n={id:s,container:e,height:i.height,minimalSize:i.minimalSize,expandable:i.expandable,animation:i.animation||{},autoHide:i.autoHide,data:i.data,testMode:i.testMode,fullScreen:i.fullScreen||!1,ignoreFirstMouseScroll:void 0!==i.ignoreFirstMouseScroll?i.ignoreFirstMouseScroll:!0!==i.fullScreen,scrollingMode:i.scrollingMode,template:i.template,templates:i.templates||{Simple:{html:'<div class="ORRespondant ORSimpleContainer">\t <div class="ORLayoutLeft ORLeft ORLeftIcon Rounded5px NonSelectable"></div>\t <div class="ORLayoutCenter">\t   <div class="ORSurveyContent"></div>\t </div>\t <div class="ORLayoutRight ORRight ORRightIcon Rounded5px NonSelectable"></div></div>'},ButtonLess:{html:'<div class="ORRespondant ORButtonLessContainer">\t <div class="ORLayoutCenter">\t   <div class="ORSurveyContent"></div>\t </div></div>'},Slim:{html:'<div class="ORRespondant ORSlimContainer">\t <div class="ORLayoutCenter">\t   <div class="ORSurveyContent"></div>\t </div>\t <div class="ORLayoutButtons">\t   <div class="ORLayoutButtonRow">      <div class="ORLayoutLeft ORLeft ORLeftIcon Rounded5px NonSelectable"></div>      <div class="ORLayoutRight ORRight ORRightIcon Rounded5px NonSelectable"></div>\t   </div>\t </div></div>'}},controlClass:i.controlClass,events:i.events},o=new d(n);I[s]=o},this.start()}function C(e){if(0==Object.keys(I).length)throw Error("There are no surveys created. First call 'launchSurvey'");if(1==Object.keys(I).length)return I[Object.keys(I)[0]];if(void 0===e)throw Error("surveyId was not provided. When there are more than 1 survey, it is required");if(Object.keys(I).indexOf(e)<0)throw Error("surveyId "+e+" was not found");return I[e]}function b(e){return C(e).getResponses()}function x(e){C(e).resetResponses()}})(),i})()}));